<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <title>CARDIO CLEVER</title>

    <link href="css/styles-merged.css" rel="stylesheet">
    <link href="css/style.min.css" rel="stylesheet">
    <link href="fonts/icomoon/style.css" rel="stylesheet">
    <link href="css/predictor.css" rel="stylesheet">
    <link href="css/back-to-top.css" rel="stylesheet">

    <style>
        /* Additional CSS for health recommendations */
        .health-recommendation-section {
            padding: 20px;
            margin: 20px 0;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #1a57a5;
        }
        
        .recommendation-card {
            background: white;
            padding: 20px;
            margin: 15px 0;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .risk-high {
            border-left: 4px solid #dc3545;
            background: #f8d7da;
        }
        
        .risk-medium {
            border-left: 4px solid #ffc107;
            background: #fff3cd;
        }
        
        .risk-low {
            border-left: 4px solid #28a745;
            background: #d4edda;
        }
        
        .health-tips ul, .recipes ul, .exercises ul {
            padding-left: 20px;
        }
        
        .health-tips li, .recipes li, .exercises li {
            margin-bottom: 8px;
            line-height: 1.5;
        }

        /* Prediction box styles */
        .prediction-box {
            text-align: center;
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            font-weight: bold;
            font-size: 18px;
            color: white;
            transition: all 0.3s ease;
        }

        .risk-low-box {
            background: linear-gradient(135deg, #28a745, #20c997);
            border: 3px solid #28a745;
        }

        .risk-medium-box {
            background: linear-gradient(135deg, #ffc107, #fd7e14);
            border: 3px solid #ffc107;
            color: #212529;
        }

        .risk-high-box {
            background: linear-gradient(135deg, #dc3545, #c82333);
            border: 3px solid #dc3545;
        }

        .risk-very-high-box {
            background: linear-gradient(135deg, #6f42c1, #e83e8c);
            border: 3px solid #6f42c1;
        }

        .risk-text {
            font-size: 24px;
            margin-bottom: 5px;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }

        .risk-percentage {
            font-size: 32px;
            font-weight: bold;
            margin: 10px 0;
        }

        .risk-description {
            font-size: 14px;
            opacity: 0.9;
            margin-top: 5px;
        }
    </style>

    <!--[if lt IE 9]>
    <script src="js/vendor/html5shiv.min.js"></script>
    <script src="js/vendor/respond.min.js"></script>
    <![endif]-->
</head>
<body>
<!-- Disclaimer -->
<div style="background: #ffeb3b; color: #856404; padding: 10px; text-align: center; border-bottom: 1px solid #ffeaa7;">
    <strong>Disclaimer:</strong> This is a demonstration prototype. Predictions are based on sample data and should not be used for medical diagnosis. Consult healthcare professionals for accurate heart disease assessment.
</div>
    
<script src="https://d3js.org/d3.v3.min.js"></script>
<script src="js/back-to-top.js"></script>

<!-- Fixed navbar -->
<nav class="navbar navbar-default probootstrap-navbar">
    <div class="container">
        <div class="navbar-header">
            <button aria-controls="navbar" aria-expanded="false" class="navbar-toggle collapsed"
                    data-target="#navbar-collapse"
                    data-toggle="collapse" type="button">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="index.html">CARDIO CLEVER</a>
        </div>

        <div class="navbar-collapse collapse" id="navbar-collapse">
            <ul class="nav navbar-nav navbar-right">
                <li class="active"><a data-nav-section="home" href="#">Home</a></li>
                <li><a data-nav-section="features" href="#">Features</a></li>
                <li><a data-nav-section="predict" href="#">Predict</a></li>
                <li><a data-nav-section="analysis" href="#">Analysis</a></li>
                <li><a data-nav-section="contact" href="#">Contact</a></li>
            </ul>
        </div>
    </div>
</nav>

<section class="probootstrap-hero probootstrap-slant"
         data-section="home" data-stellar-background-ratio="0.5" id="home"
         style="background-image: url(img/main_back.jpg);">
    <div class="container">
        <div class="row intro-text">
            <div class="col-md-8 col-md-offset-2 text-center">
                <h1 class="probootstrap-heading probootstrap-animate" style="color:#E0F7FA">Predict your chance of
                    having a heart disease because prevention is better than cure!</h1>
                <div class="probootstrap-subheading center">
                    <p class="probootstrap-animate">
                        <a class="btn btn-primary" href="#predict" role="button">Check Now</a>
                        <a class="btn btn-default smoothscroll" href="#analysis" role="button">See Analysis</a>
                    </p>
                </div>
            </div>
        </div>
    </div>
</section>

<button class="btn btn-primary" id="backToTopBtn" onclick="topFunction()" title="Go to top">
    <span class="icon icon-align-top"></span>
</button>

<section class="probootstrap-section">
    <div class="container">
        <div class="row">
            <div class="col-md-4">
                <div class="probootstrap-service-item probootstrap-animate" data-animate-effect="fadeIn">
                    <span class="icon icon-phone3"></span>
                    <h2>Mobile Optimize</h2>
                    <p>Optimized for viewing on different platforms and devices. Looks the same on every mobile,
                        laptops, PCs and tablets. A smooth, continuous flow.</p>
                    <p><a class="probootstrap-link" href="#features">Learn More <i class="icon-chevron-right"></i></a>
                    </p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="probootstrap-service-item probootstrap-animate" data-animate-effect="fadeIn">
                    <span class="icon icon-wallet2"></span>
                    <h2>Decrease Costs</h2>
                    <p>Examine your heart related reports by yourself. Predict the chance of having a heart disease free
                        of cost.</p>
                    <p><a class="probootstrap-link" href="#predict">Learn More <i class="icon-chevron-right"></i></a>
                    </p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="probootstrap-service-item probootstrap-animate" data-animate-effect="fadeIn">
                    <span class="icon icon-lightbulb"></span>
                    <h2>Smart Idea</h2>
                    <p>Great accuracy. Accurate prediction rates. Analysis and prediction based on large samples of
                        data.</p>
                    <p><a class="probootstrap-link" href="#analysis">Learn More <i class="icon-chevron-right"></i></a>
                    </p>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="probootstrap-section probootstrap-bg-light" data-section="features" id="features">
    <div class="container">
        <div class="row text-center mb100">
            <div class="col-md-8 col-md-offset-2 probootstrap-section-heading">
                <h2 class="mb30 text-black probootstrap-heading">Features</h2>
                <p>Loads of features. Making it easier for anyone to predict the chance of getting heart disease. Shows
                    analysis done on large data sets.</p>
            </div>
        </div>
        <!-- END row -->
        <div class="row mb100">
            <div class="col-md-8 probootstrap-animate">
                <p><img alt="Dataset" class="img-responsive probootstrap-shadow" src="img/dataset.jpg"></p>
            </div>
            <div class="col-md-4 probootstrap-section-heading">
                <h3 class="text-primary probootstrap-heading-2">Vast and Reliable Dataset <span
                        class="icon icon-database2"></span></h3>
                <p>This database contains 76 attributes, but all published experiments refer to using a subset of 14 of
                    them. In particular, the Cleveland database is the only one that has been used by ML researchers to
                    this date.</p>
                <ul class="probootstrap-list">
                    <li class="probootstrap-check">Dataset available at <a
                            class="probootstrap-link" href="http://archive.ics.uci.edu/ml/datasets/Heart+Disease"
                            target="_blank">UCI <span class="icon icon-database"></span></a></li>
                    <li class="probootstrap-check">Contains 76 attributes</li>
                    <li class="probootstrap-check">Report on subset of 14 such attributes</li>
                </ul>
            </div>
        </div>
        <!-- END row -->
    </div>
</section>

<section class="probootstrap-section" data-section="predict" id="predict">
    <div class="container">
        <div class="row text-center mb100">
            <div class="col-md-8 col-md-offset-2 probootstrap-section-heading">
                <h2 class="mb30 text-black probootstrap-heading">Predict your Chance of Having a Heart Disease</h2>
                <p>Enter the appropriate values of symptoms you face. Get the chances of you contracting heart disease
                    based on those values.</p>
            </div>
        </div>
        <!-- Main Div -->
        <div id="parent">
            <div id="wrapper">
                <div style="text-align: center;">
                    <h1 class="text-black probootstrap-heading">Heart Disease Predictor</h1>
                </div>
                
                <!-- Color-coded Prediction Box -->
                <div id="prediction-result" class="prediction-box risk-low-box" style="display: none;">
                    <div class="risk-text">LOW RISK</div>
                    <div class="risk-percentage">0.00%</div>
                    <div class="risk-description">Minimal risk of heart disease</div>
                </div>

                <div class="child1">
                    <table class="naked_table">
                        <tr>
                            <td>
                                <label class="before_slider" for="nSex1">Sex (0=female,1=male)</label>
                            </td>
                            <td class="input_slider">
                                <form class="slider_input">
                                    <input class="hd-slider-width" id="nSex1" max="1" min="0" name="amountRange"
                                           oninput="this.form.amountInput.value=this.value"
                                           step="1" type="range" value="0"/>
                                    <input class="hd-number-width" id="nSex2" max="1" min="0" name="amountInput"
                                           oninput="this.form.amountRange.value=this.value"
                                           step="1" type="number" value="0"/>
                                </form>
                            </td>
                        </tr>
                        <tr>
                            <td><label class="before_slider" for="nRestbp1">Resting Blood Pressure (94 - 200 mmHg)</label></td>
                            <td class="input_slider">
                                <form class="slider_input">
                                    <input class="hd-slider-width" id="nRestbp1" max="200" min="94" name="amountRange"
                                           oninput="this.form.amountInput.value=this.value"
                                           step="all" type="range" value="94"/>
                                    <input class="hd-number-width" id="nRestbp2" max="200" min="94" name="amountInput"
                                           oninput="this.form.amountRange.value=this.value"
                                           step="all" type="number" value="94"/>
                                </form>
                            </td>
                        </tr>
                        <tr>
                            <td><label class="before_slider" for="nThalach1">Thalium Stress Test Maximum Heart Rate (71 - 202)</label></td>
                            <td class="input_slider">
                                <form class="slider_input">
                                    <input class="hd-slider-width" id="nThalach1" max="202" min="71" name="amountRange"
                                           oninput="this.form.amountInput.value=this.value"
                                           step="all" type="range" value="71"/>
                                    <input class="hd-number-width" id="nThalach2" max="202" min="71" name="amountInput"
                                           oninput="this.form.amountRange.value=this.value"
                                           step="all" type="number" value="71"/>
                                </form>
                            </td>
                        </tr>
                        <tr>
                            <td><label class="before_slider" for="nCa1">Number of Major Vessels Colored by Fluoroscopy (0 - 3)</label></td>
                            <td class="input_slider">
                                <form class="slider_input">
                                    <input class="hd-slider-width" id="nCa1" max="3" min="0" name="amountRange"
                                           oninput="this.form.amountInput.value=this.value"
                                           step="all" type="range" value="0"/>
                                    <input class="hd-number-width" id="nCa2" max="3" min="0" name="amountInput"
                                           oninput="this.form.amountRange.value=this.value"
                                           step="all" type="number" value="0"/>
                                </form>
                            </td>
                        </tr>
                        <tr>
                            <td><label class="before_slider" for="nCp1">Chest Pain Type (1=typical angina, 2=atypical angina, 3=non-angina, 4=asymptomatic angina)</label></td>
                            <td class="input_slider">
                                <form class="slider_input">
                                    <input class="hd-slider-width" id="nCp1" max="4" min="1" name="amountRange"
                                           oninput="this.form.amountInput.value=this.value"
                                           step="1" type="range" value="1"/>
                                    <input class="hd-number-width" id="nCp2" max="4" min="1" name="amountInput"
                                           oninput="this.form.amountRange.value=this.value"
                                           step="1" type="number" value="1"/>
                                </form>
                            </td>
                        </tr>
                        <tr>
                            <td><label class="before_slider" for="nSlope1">Peak Exercise ST Segment (0=flat or downsloping, 1=upsloping)</label></td>
                            <td class="input_slider">
                                <form class="slider_input">
                                    <input class="hd-slider-width" id="nSlope1" max="1" min="0" name="amountRange"
                                           oninput="this.form.amountInput.value=this.value"
                                           step="1" type="range" value="0"/>
                                    <input class="hd-number-width" id="nSlope2" max="1" min="0" name="amountInput"
                                           oninput="this.form.amountRange.value=this.value"
                                           step="1" type="number" value="0"/>
                                </form>
                            </td>
                        </tr>
                        <tr>
                            <td><label class="before_slider" for="nThal1">Thalium Test: (0=normal or fixed defect, 1=reversible defect)</label></td>
                            <td class="input_slider">
                                <form class="slider_input">
                                    <input class="hd-slider-width" id="nThal1" max="1" min="0" name="amountRange"
                                           oninput="this.form.amountInput.value=this.value"
                                           step="1" type="range" value="0"/>
                                    <input class="hd-number-width" id="nThal2" max="1" min="0" name="amountInput"
                                           oninput="this.form.amountRange.value=this.value"
                                           step="1" type="number" value="0"/>
                                </form>
                            </td>
                        </tr>
                        <tr>
                            <td><label class="before_slider" for="nAlcohol1">Alcohol Consumption (0=No, 1=Yes)</label></td>
                            <td class="input_slider">
                                <form class="slider_input">
                                    <input class="hd-slider-width" id="nAlcohol1" max="1" min="0" name="amountRange"
                                           oninput="this.form.amountInput.value=this.value"
                                           step="1" type="range" value="0"/>
                                    <input class="hd-number-width" id="nAlcohol2" max="1" min="0" name="amountInput"
                                           oninput="this.form.amountRange.value=this.value"
                                           step="1" type="number" value="0"/>
                                </form>
                            </td>
                        </tr>
                        <tr>
                            <td><label class="before_slider" for="nWeight1">Weight (kg)</label></td>
                            <td class="input_slider">
                                <form class="slider_input">
                                    <input class="hd-slider-width" id="nWeight1" max="150" min="30" name="amountRange"
                                           oninput="this.form.amountInput.value=this.value"
                                           step="1" type="range" value="60"/>
                                    <input class="hd-number-width" id="nWeight2" max="150" min="30" name="amountInput"
                                           oninput="this.form.amountRange.value=this.value"
                                           step="1" type="number" value="60"/>
                                </form>
                            </td>
                        </tr>
                        <tr>
                            <td><label class="before_slider" for="nFamily1">Family History of Heart Disease (0=No, 1=Yes)</label></td>
                            <td class="input_slider">
                                <form class="slider_input">
                                    <input class="hd-slider-width" id="nFamily1" max="1" min="0" name="amountRange"
                                           oninput="this.form.amountInput.value=this.value"
                                           step="1" type="range" value="0"/>
                                    <input class="hd-number-width" id="nFamily2" max="1" min="0" name="amountInput"
                                           oninput="this.form.amountRange.value=this.value"
                                           step="1" type="number" value="0"/>
                                </form>
                            </td>
                        </tr>
                        <tr>
                            <td><label class="before_slider" for="nPain1">Left Hand Pain (0=No, 1=Yes)</label></td>
                            <td class="input_slider">
                                <form class="slider_input">
                                    <input class="hd-slider-width" id="nPain1" max="1" min="0" name="amountRange" 
                                           oninput="this.form.amountInput.value=this.value"
                                           step="1" type="range" value="0"/>
                                    <input class="hd-number-width" id="nPain2" max="1" min="0" name="amountInput"
                                           oninput="this.form.amountRange.value=this.value"
                                           step="1" type="number" value="0"/>
                                </form>
                            </td>
                        </tr>
                        <tr>
                            <td><label class="before_slider" for="nSmoke1">Smoker (0=No, 1=Yes)</label></td>
                            <td class="input_slider">
                                <form class="slider_input">
                                    <input class="hd-slider-width" id="nSmoke1" max="1" min="0" name="amountRange"
                                           oninput="this.form.amountInput.value=this.value"
                                           step="1" type="range" value="0"/>
                                    <input class="hd-number-width" id="nSmoke2" max="1" min="0" name="amountInput"
                                           oninput="this.form.amountRange.value=this.value"
                                           step="1" type="number" value="0"/>
                                </form>
                            </td>
                        </tr>
                        <tr>
                            <td></td>
                            <td class="input_slider">
                                <input class="btn btn-primary" onclick="resetAllSliders()" type="button"
                                       value="Reset All Sliders"/>
                            </td>
                        </tr>
                    </table>
                </div>
                <div class="child2">
                    <!-- D3.js visualization will be inserted here -->
                </div>
            </div>
            <div class="clear"></div>
        </div>
    </div>
</section>

<!-- Health Recommendations Section -->
<section class="probootstrap-section probootstrap-bg-light" id="health-recommendations">
    <div class="container">
        <div class="row text-center mb100">
            <div class="col-md-8 col-md-offset-2 probootstrap-section-heading">
                <h2 class="mb30 text-black probootstrap-heading">Personalized Health Recommendations</h2>
                <p>Based on your heart disease risk assessment</p>
            </div>
        </div>

        <!-- Risk Level Indicator -->
        <div class="row mb50">
            <div class="col-md-12">
                <div id="risk-indicator" class="recommendation-card" style="display: none;">
                    <h3 id="risk-level-text" class="text-center"></h3>
                </div>
            </div>
        </div>

        <!-- Health Tips Section -->
        <div class="row mb50">
            <div class="col-md-12">
                <h3 class="text-primary">üí° Health Tips & Prevention</h3>
                <div id="health-tips" class="recommendation-card">
                    <p>Adjust your parameters above to see personalized health tips based on your heart disease risk assessment.</p>
                </div>
            </div>
        </div>

        <!-- Recipes and Exercises Section -->
        <div class="row mb50">
            <div class="col-md-6">
                <h3 class="text-primary">üçé Heart-Healthy Recipes</h3>
                <div id="recipes" class="recommendation-card">
                    <p>Your personalized recipes will appear here based on your risk level.</p>
                </div>
            </div>

            <div class="col-md-6">
                <h3 class="text-primary">üí™ Exercise Plans</h3>
                <div id="exercises" class="recommendation-card">
                    <p>Your exercise recommendations will appear here based on your risk level.</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Rest of your existing sections (analysis, contact, etc.) -->
<section class="probootstrap-section probootstrap-bg-light" data-section="analysis" id="analysis">
    <div class="container">
        <div class="row text-center mb100">
            <div class="col-md-8 col-md-offset-2 probootstrap-section-heading">
                <h2 class="mb30 text-black probootstrap-heading">Analysis Results Based on Dataset Available</h2>
                <p>Model's accuracy is 87.3 +- 1.4%. The following are the results of analysis done on the available
                    heart disease dataset. Each graph shows the result based on different attributes.</p>
                <p>Green box indicates No Disease. Red box indicates Disease.</p>
                <img alt="Flow of Analysis" class="img-responsive probootstrap-shadow" src="img/flow.jpg">
            </div>
        </div>
        <div class="row">
            <!-- Your analysis images here -->
        </div>
    </div>
</section>

<section class="probootstrap-section probootstrap-cta">
</section>

<section class="probootstrap-section probootstrap-bg-light" data-section="contact" id="contact">
    <div class="container">
        <div class="row">
            <div class="col-md-6">
                <form action="https://formspree.io/f/xkgqprwb" method="POST" class="probootstrap-form" id="contact-form">
                    <h2 class="text-black mt0">Get In Touch</h2>
                    
                    <div class="form-group">
                        <input class="form-control" name="name" placeholder="Your Name" type="text" required>
                    </div>
                    
                    <div class="form-group">
                        <input class="form-control" name="email" placeholder="Your Email" type="email" required>
                    </div>
                    
                    <div class="form-group">
                        <input class="form-control" name="phone" placeholder="Your Phone" type="tel">
                    </div>
                    
                    <div class="form-group">
                        <textarea class="form-control" name="message" cols="30" placeholder="Write a Message" rows="10" required></textarea>
                    </div>
                    
                    <div class="form-group">
                        <button class="btn btn-primary" type="submit" id="submit-btn">
                            <span id="submit-text">Send Message</span>
                            <div id="submit-spinner" class="spinner-border spinner-border-sm" role="status" style="display: none;">
                                <span class="sr-only">Loading...</span>
                            </div>
                        </button>
                    </div>
                    
                    <div id="form-message" style="display: none;"></div>
                </form>
            </div>
            
            <div class="col-md-3 col-md-push-1">
                <ul class="probootstrap-contact-details">
                    <li>
                        <span class="text-uppercase">Email</span>
                        rekhabhavyasri871@gmail.com<br>
                        akshithashambegari@gmail.com<br>
                        sreevaniyerikalagari@gmail.com
                    </li>
                    <li>
                        <span class="text-uppercase">Response Time</span>
                        We typically respond within 24 hours
                    </li>
                </ul>
            </div>
        </div>
    </div>
</section>

<style>
.spinner-border-sm {
    width: 1rem;
    height: 1rem;
}

#form-message {
    padding: 10px;
    border-radius: 5px;
    margin-top: 15px;
}

.success-message {
    background: #d4edda;
    color: #155724;
    border: 1px solid #c3e6cb;
}

.error-message {
    background: #f8d7da;
    color: #721c24;
    border: 1px solid #f5c6cb;
}
</style>

<script>
// Form submission handler
document.addEventListener('DOMContentLoaded', function() {
    const contactForm = document.getElementById('contact-form');
    if (contactForm) {
        contactForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const submitBtn = document.getElementById('submit-btn');
            const submitText = document.getElementById('submit-text');
            const submitSpinner = document.getElementById('submit-spinner');
            const formMessage = document.getElementById('form-message');
            
            // Show loading state
            submitText.textContent = 'Sending...';
            submitSpinner.style.display = 'inline-block';
            submitBtn.disabled = true;
            
            // Get form data
            const formData = new FormData(this);
            
            // Send to Formspree
            fetch(this.action, {
                method: 'POST',
                body: formData,
                headers: {
                    'Accept': 'application/json'
                }
            })
            .then(response => {
                if (response.ok) {
                    // Success
                    formMessage.textContent = 'Thank you! Your message has been sent successfully.';
                    formMessage.className = 'success-message';
                    formMessage.style.display = 'block';
                    this.reset();
                } else {
                    throw new Error('Form submission failed');
                }
            })
            .catch(error => {
                // Error
                formMessage.textContent = 'Sorry, there was an error sending your message. Please try again or email us directly.';
                formMessage.className = 'error-message';
                formMessage.style.display = 'block';
            })
            .finally(() => {
                // Reset button state
                submitText.textContent = 'Send Message';
                submitSpinner.style.display = 'none';
                submitBtn.disabled = false;
                
                // Hide message after 5 seconds
                setTimeout(() => {
                    formMessage.style.display = 'none';
                }, 5000);
            });
        });
    }
});
</script>
    <div class="container">
        <div class="row">
            <div class="col-md-12 text-center">
                <p>&copy; 2024 Cardio Clever. All Rights Reserved.</p>
            </div>
        </div>
    </div>
</footer>

<script src="js/scripts.min.js"></script>
<script src="js/custom.js"></script>

<script>
// Initialize global variables
let val01, val02, val03, val04, val05, val06, val07, val08, val09, val10, val11, val12;
let holder;

// Initialize the application
document.addEventListener('DOMContentLoaded', function() {
    initializePredictionSystem();
    // Show initial prediction box
    document.getElementById('prediction-result').style.display = 'block';
});

function initializePredictionSystem() {
    const width = 100;
    const height = 400;

    // Clear existing content and create new SVG
    d3.select(".child2").html("");
    holder = d3.select(".child2")
        .append("svg")
        .attr("width", width)
        .attr("height", height);

    // Draw the progress bar background
    const y0 = 20;
    const height0 = 380;
    
    // Draw the filled rectangle (will be updated)
    holder.append("rect")
        .attr("x", 5)
        .attr("y", y0 + height0)
        .style("fill", "rgb(0,255,0)")
        .attr("height", 0)
        .attr("width", 90)
        .attr("class", "progress-bar");

    // Draw the container rectangle
    holder.append("rect")
        .attr("x", 5)
        .attr("y", y0)
        .style("fill", "none")
        .style("stroke", "lightblue")
        .style("stroke-width", 4)
        .attr("height", height0)
        .attr("width", 90);

    // Add percentage text
    holder.append("text")
        .text("0.00%")
        .attr("x", 12)
        .attr("y", y0 + height0 - 10)
        .attr("fill", "black")
        .attr("font-family", "Verdana")
        .attr("font-size", "20")
        .attr("class", "percentage-text");

    // Initialize input values
    val01 = document.getElementById("nSex1").value;
    val02 = document.getElementById("nRestbp1").value;
    val03 = document.getElementById("nThalach1").value;
    val04 = document.getElementById("nCa1").value;
    val05 = document.getElementById("nCp1").value;
    val06 = document.getElementById("nSlope1").value;
    val07 = document.getElementById("nThal1").value;
    val08 = document.getElementById("nAlcohol1").value;
    val09 = document.getElementById("nWeight1").value;
    val10 = document.getElementById("nFamily1").value;
    val11 = document.getElementById("nPain1").value;
    val12 = document.getElementById("nSmoke1").value;

    // Set up event listeners for all inputs
    setupEventListeners();
    
    // Initial update
    updateOne(val01, 0);
}

function setupEventListeners() {
    // Set up all your event listeners here (same as before)
    // Sex
    d3.select("#nSex1").on("input", function() { updateOne(+this.value, 1); });
    d3.select("#nSex2").on("input", function() { updateOne(+this.value, 1); });
    
    // Resting BP
    d3.select("#nRestbp1").on("input", function() { updateOne(+this.value, 2); });
    d3.select("#nRestbp2").on("input", function() { updateOne(+this.value, 2); });
    
    // Thalach
    d3.select("#nThalach1").on("input", function() { updateOne(+this.value, 3); });
    d3.select("#nThalach2").on("input", function() { updateOne(+this.value, 3); });
    
    // CA
    d3.select("#nCa1").on("input", function() { updateOne(+this.value, 4); });
    d3.select("#nCa2").on("input", function() { updateOne(+this.value, 4); });
    
    // CP
    d3.select("#nCp1").on("input", function() { updateOne(+this.value, 5); });
    d3.select("#nCp2").on("input", function() { updateOne(+this.value, 5); });
    
    // Slope
    d3.select("#nSlope1").on("input", function() { updateOne(+this.value, 6); });
    d3.select("#nSlope2").on("input", function() { updateOne(+this.value, 6); });
    
    // Thal
    d3.select("#nThal1").on("input", function() { updateOne(+this.value, 7); });
    d3.select("#nThal2").on("input", function() { updateOne(+this.value, 7); });
    
    // Alcohol
    d3.select("#nAlcohol1").on("input", function() { updateOne(+this.value, 8); });
    d3.select("#nAlcohol2").on("input", function() { updateOne(+this.value, 8); });
    
    // Weight
    d3.select("#nWeight1").on("input", function() { updateOne(+this.value, 9); });
    d3.select("#nWeight2").on("input", function() { updateOne(+this.value, 9); });
    
    // Family History
    d3.select("#nFamily1").on("input", function() { updateOne(+this.value, 10); });
    d3.select("#nFamily2").on("input", function() { updateOne(+this.value, 10); });
    
    // Pain
    d3.select("#nPain1").on("input", function() { updateOne(+this.value, 11); });
    d3.select("#nPain2").on("input", function() { updateOne(+this.value, 11); });
    
    // Smoke
    d3.select("#nSmoke1").on("input", function() { updateOne(+this.value, 12); });
    d3.select("#nSmoke2").on("input", function() { updateOne(+this.value, 12); });
}

function updateOne(value, index) {
    // Update the appropriate value based on index
    switch(index) {
        case 1: val01 = value; break;
        case 2: val02 = value; break;
        case 3: val03 = value; break;
        case 4: val04 = value; break;
        case 5: val05 = value; break;
        case 6: val06 = value; break;
        case 7: val07 = value; break;
        case 8: val08 = value; break;
        case 9: val09 = value; break;
        case 10: val10 = value; break;
        case 11: val11 = value; break;
        case 12: val12 = value; break;
    }

    // Calculate risk
    calculateRisk();
}

function resetAllSliders() {
    // Reset all sliders to default values
    const sliders = [
        {id1: "nSex1", id2: "nSex2", def: "0"},
        {id1: "nRestbp1", id2: "nRestbp2", def: "94"},
        {id1: "nThalach1", id2: "nThalach2", def: "71"},
        {id1: "nCa1", id2: "nCa2", def: "0"},
        {id1: "nCp1", id2: "nCp2", def: "1"},
        {id1: "nSlope1", id2: "nSlope2", def: "0"},
        {id1: "nThal1", id2: "nThal2", def: "0"},
        {id1: "nAlcohol1", id2: "nAlcohol2", def: "0"},
        {id1: "nWeight1", id2: "nWeight2", def: "60"},
        {id1: "nFamily1", id2: "nFamily2", def: "0"},
        {id1: "nPain1", id2: "nPain2", def: "0"},
        {id1: "nSmoke1", id2: "nSmoke2", def: "0"}
    ];

    sliders.forEach(slider => {
        document.getElementById(slider.id1).value = slider.def;
        document.getElementById(slider.id2).value = slider.def;
    });

    // Reset values and recalculate
    val01 = 0; val02 = 94; val03 = 71; val04 = 0; val05 = 1; val06 = 0;
    val07 = 0; val08 = 0; val09 = 60; val10 = 0; val11 = 0; val12 = 0;
    
    calculateRisk();
}

function calculateRisk() {
    // Standardize continuous features
    let srbp_val = (val02 - 131.7157) / 17.7478;
    let sthalach_val = (val03 - 149.3278) / 23.1211;
    let sca_val = (val04 - 0.6722) / 3.0;

    // Categorical features
    let cp_contr = 0.0;
    if (val05 === 1) cp_contr = -2.2318;
    else if (val05 === 2) cp_contr = -1.2681;
    else if (val05 === 3) cp_contr = -2.1124;
    
    let slope_contr = (val06 === 1) ? -1.4726 : 0.0;
    let thal_contr = (val07 === 1) ? 1.5009 : 0.0;

    // Compute probability
    let scprod = 1.4361 * val01 + 0.4415 * srbp_val - 0.4431 * sthalach_val +
                 3.7984 * sca_val + cp_contr + slope_contr + thal_contr +
                 0.8 * val08 + 0.02 * val09 + 1.0 * val10 + 1.2 * val11 + 1.5 * val12;

    let drec = 1.0 / (1.0 + Math.exp(-scprod));
    let riskPercentage = drec * 100;

    // Update visualization
    updateVisualization(riskPercentage);
    
    // Update prediction box with color coding
    updatePredictionBox(riskPercentage);
    
    // Update health recommendations
    updateHealthRecommendations(riskPercentage);
}

function updateVisualization(riskPercentage) {
    const y0 = 20;
    const height0 = 380;
    const drecs = height0 * (riskPercentage / 100);
    
    // Update progress bar
    holder.select(".progress-bar")
        .attr("y", y0 + height0 - drecs)
        .attr("height", drecs)
        .style("fill", percentToRGB(riskPercentage));

    // Update percentage text
    holder.select(".percentage-text")
        .text(riskPercentage.toFixed(2) + "%");
}

function updatePredictionBox(riskPercentage) {
    const predictionBox = document.getElementById('prediction-result');
    const riskText = predictionBox.querySelector('.risk-text');
    const riskPercentageEl = predictionBox.querySelector('.risk-percentage');
    const riskDescription = predictionBox.querySelector('.risk-description');

    // Update percentage
    riskPercentageEl.textContent = riskPercentage.toFixed(2) + '%';

    // Determine risk level and update colors/text
    if (riskPercentage < 20) {
        // Low Risk - Green
        predictionBox.className = 'prediction-box risk-low-box';
        riskText.textContent = 'LOW RISK';
        riskDescription.textContent = 'Minimal risk of heart disease - Continue healthy lifestyle';
    } else if (riskPercentage < 50) {
        // Medium Risk - Yellow/Orange
        predictionBox.className = 'prediction-box risk-medium-box';
        riskText.textContent = 'MEDIUM RISK';
        riskDescription.textContent = 'Moderate risk - Consider lifestyle improvements';
    } else if (riskPercentage < 75) {
        // High Risk - Red
        predictionBox.className = 'prediction-box risk-high-box';
        riskText.textContent = 'HIGH RISK';
        riskDescription.textContent = 'High risk - Consult healthcare professional';
    } else {
        // Very High Risk - Purple
        predictionBox.className = 'prediction-box risk-very-high-box';
        riskText.textContent = 'VERY HIGH RISK';
        riskDescription.textContent = 'Very high risk - Immediate medical consultation recommended';
    }

    // Show the prediction box
    predictionBox.style.display = 'block';
}

function percentToRGB(percent) {
    if (percent >= 100) percent = 99;
    let r, g, b;

    if (percent < 20) {
        // Green
        r = 40;
        g = 167;
        b = 69;
    } else if (percent < 50) {
        // Yellow to Orange
        r = 255;
        g = 193 - Math.floor(93 * ((percent - 20) / 30));
        b = 7;
    } else if (percent < 75) {
        // Orange to Red
        r = 255;
        g = 100 - Math.floor(100 * ((percent - 50) / 25));
        b = 0;
    } else {
        // Red to Purple
        r = 220 - Math.floor(20 * ((percent - 75) / 25));
        g = 53;
        b = 69 + Math.floor(106 * ((percent - 75) / 25));
    }

    return "rgb(" + r + "," + g + "," + b + ")";
}

// Keep the rest of your existing functions (updateHealthRecommendations, updateRiskIndicator, etc.)
function updateHealthRecommendations(riskPercentage) {
    updateRiskIndicator(riskPercentage);
    updateHealthTips(riskPercentage);
    updateRecipes(riskPercentage);
    updateExercises(riskPercentage);
}

function updateRiskIndicator(riskPercentage) {
    const indicator = document.getElementById('risk-indicator');
    const text = document.getElementById('risk-level-text');
    
    indicator.style.display = 'block';
    
    if (riskPercentage >= 50) {
        indicator.className = 'recommendation-card risk-high';
        text.innerHTML = 'üö® <strong>High Risk</strong> - Please consult a healthcare professional immediately';
    } else if (riskPercentage >= 20) {
        indicator.className = 'recommendation-card risk-medium';
        text.innerHTML = '‚ö†Ô∏è <strong>Moderate Risk</strong> - Take preventive measures and maintain healthy lifestyle';
    } else {
        indicator.className = 'recommendation-card risk-low';
        text.innerHTML = '‚úÖ <strong>Low Risk</strong> - Continue with healthy habits and regular check-ups';
    }
}

function updateHealthTips(riskPercentage) {
    const tipsContainer = document.getElementById('health-tips');
    let tips = '';

    if (riskPercentage < 20) {
        tips = `
            <h4>Low Risk - Maintenance Tips</h4>
            <ul>
                <li>‚úÖ Continue regular health check-ups</li>
                <li>‚úÖ Maintain balanced diet with fruits & vegetables</li>
                <li>‚úÖ Exercise 30 minutes daily</li>
                <li>‚úÖ Monitor blood pressure regularly</li>
                <li>‚úÖ Get 7-8 hours of sleep nightly</li>
                <li>‚úÖ Stay hydrated and maintain healthy weight</li>
            </ul>
        `;
    } else if (riskPercentage < 50) {
        tips = `
            <h4>Moderate Risk - Prevention Focus</h4>
            <ul>
                <li>‚ö†Ô∏è Reduce salt intake to less than 5g/day</li>
                <li>‚ö†Ô∏è Limit processed foods and sugars</li>
                <li>‚ö†Ô∏è Increase physical activity to 45 minutes/day</li>
                <li>‚ö†Ô∏è Quit smoking and limit alcohol</li>
                <li>‚ö†Ô∏è Manage stress through meditation/yoga</li>
                <li>‚ö†Ô∏è Regular cholesterol and blood pressure checks</li>
            </ul>
        `;
    } else {
        tips = `
            <h4>High Risk - Immediate Action Needed</h4>
            <ul>
                <li>üö® Consult cardiologist immediately</li>
                <li>üö® Strict low-sodium, low-fat diet</li>
                <li>üö® Regular blood pressure monitoring</li>
                <li>üö® Supervised exercise program</li>
                <li>üö® Medication adherence if prescribed</li>
                <li>üö® Emergency contact ready</li>
                <li>üö® Avoid strenuous activities</li>
            </ul>
        `;
    }

    tipsContainer.innerHTML = tips;
}

function updateRecipes(riskPercentage) {
    const recipesContainer = document.getElementById('recipes');
    let recipes = '';

    if (riskPercentage < 30) {
        recipes = `
            <h5>Maintenance Recipes</h5>
            <ul>
                <li><strong>Oatmeal with Berries:</strong> 1/2 cup oats, 1 cup mixed berries, 1 tbsp flaxseed</li>
                <li><strong>Grilled Salmon:</strong> 150g salmon, steamed broccoli, quinoa</li>
                <li><strong>Mediterranean Salad:</strong> Mixed greens, olives, feta, olive oil dressing</li>
                <li><strong>Vegetable Stir-fry:</strong> Colorful veggies with tofu in light sauce</li>
            </ul>
        `;
    } else if (riskPercentage < 60) {
        recipes = `
            <h5>Heart-Protective Recipes</h5>
            <ul>
                <li><strong>Low-Sodium Lentil Soup:</strong> Lentils, carrots, celery, no salt</li>
                <li><strong>Baked Chicken Breast:</strong> Skinless chicken with herbs, roasted vegetables</li>
                <li><strong>Avocado Toast:</strong> Whole grain bread, 1/2 avocado, cherry tomatoes</li>
                <li><strong>Steamed Fish:</strong> White fish with lemon and herbs</li>
            </ul>
        `;
    } else {
        recipes = `
            <h5>Therapeutic Heart Diet</h5>
            <ul>
                <li><strong>Steamed Fish:</strong> White fish with lemon, steamed greens (NO salt)</li>
                <li><strong>Vegetable Stir-fry:</strong> Mixed vegetables, tofu, low-sodium soy sauce</li>
                <li><strong>Fruit Smoothie:</strong> Banana, spinach, almond milk, no sugar</li>
                <li><strong>Boiled Chicken:</strong> Plain boiled chicken with steamed vegetables</li>
            </ul>
        `;
    }

    recipesContainer.innerHTML = recipes;
}

function updateExercises(riskPercentage) {
    const exercisesContainer = document.getElementById('exercises');
    let exercises = '';

    if (riskPercentage < 25) {
        exercises = `
            <h5>Fitness Maintenance</h5>
            <ul>
                <li>üèÉ‚Äç‚ôÇÔ∏è Brisk walking: 30 minutes, 5 days/week</li>
                <li>üö¥‚Äç‚ôÇÔ∏è Cycling: 20-30 minutes, 3 days/week</li>
                <li>üí™ Strength training: 2 days/week</li>
                <li>üßò‚Äç‚ôÄÔ∏è Yoga: 2 days/week for flexibility</li>
                <li>üèä‚Äç‚ôÇÔ∏è Swimming: 30 minutes, 2 days/week</li>
            </ul>
        `;
    } else if (riskPercentage < 55) {
        exercises = `
            <h5>Cardio Improvement</h5>
            <ul>
                <li>üö∂‚Äç‚ôÇÔ∏è Walking: 45 minutes, 5-6 days/week</li>
                <li>üèä‚Äç‚ôÇÔ∏è Swimming: 30 minutes, 2 days/week</li>
                <li>üí™ Light weights: High reps, low weight</li>
                <li>üìä Monitor heart rate during exercise</li>
                <li>üßò‚Äç‚ôÄÔ∏è Gentle yoga for stress relief</li>
            </ul>
        `;
    } else {
        exercises = `
            <h5>Supervised Activity Plan</h5>
            <ul>
                <li>üë®‚Äç‚öïÔ∏è Doctor-approved exercises only</li>
                <li>üö∂‚Äç‚ôÇÔ∏è Slow walking: 15-20 minutes, daily</li>
                <li>ü™ë Chair exercises: Seated leg lifts, arm circles</li>
                <li>üìè Stop immediately if chest pain occurs</li>
                <li>üì± Keep emergency phone nearby</li>
                <li>‚ù§Ô∏è Monitor pulse and breathing carefully</li>
            </ul>
        `;
    }

    exercisesContainer.innerHTML = exercises;
}

// Back to top function
function topFunction() {
    document.body.scrollTop = 0;
    document.documentElement.scrollTop = 0;
}
</script>

</body>
</html>